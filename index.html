<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Catallaxy Services | Perfectly Normal</title>

		<link rel="stylesheet" href="../reveal.js/dist/reset.css">
		<link rel="stylesheet" href="../reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="../reveal.js/dist/theme/black.css" id="theme">
		<link rel="stylesheet" href="../WebsiteAssets/mods.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="../reveal.js/plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h2>Perfectly Normal</h2>
					<h3>An Advanced Primer on Normalization</h3>
					
					<a href="https://www.catallaxyservices.com">Kevin Feasel</a> (<a href="https://twitter.com/feaselkl">@feaselkl</a>)<br />
					<a href="http://CSmore.info/on/dbdesign">http://CSmore.info/on/dbdesign</a>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Who Am I?  What Am I Doing Here?</h3>
					<div class="container">
						<div class="col">
							<table class="whoami">
								<tr>
									<td><a href="https://csmore.info"><img src="../WebsiteAssets/Logo.png" height="100" /></a></td>
									<td nowrap><a href="https://csmore.info">Catallaxy Services</a></td>
								</tr>
								<tr>
									<td><a href="https://curatedsql.com"><img src="../WebsiteAssets/CuratedSQLLogo.png" height="100" /></a></td>
									<td nowrap><a href="https://curatedsql.com">Curated SQL</a></td>
								</tr>
								<tr>
									<td><a href="https://www.apress.com/us/book/9781484254608"><img src="../WebsiteAssets/PolyBaseRevealed.png" height="120" /></a></td>
									<td nowrap><a href="https://www.apress.com/us/book/9781484254608">PolyBase Revealed</a></td>
								</tr>
							</table>
						</div>
						<div class="col">
							<a href="http://www.twitter.com/feaselkl"><img src="../WebsiteAssets/HeadShot.jpg" height="358" width="315" /></a>
							<br />
							<a href="http://www.twitter.com/feaselkl">@feaselkl</a>
						</div>					
					</div>
				</section>
				
				<section data-background-image="presentation/assets/background/questions.jpg" data-background-opacity="0.2">
					<h3>Is This Talk Right for Me?</h3>
					
					<p>Have you ever believed any of the following?</p>
					
					<ul>
						<li class="fragment">"Normalization isn't relevant in the business world."</li>
						<li class="fragment">"Normalize until it hurts, denormalize until it works."</li>
						<li class="fragment">"The main purpose of normalization is to minimize disk utilization by removing duplicate data."</li>
						<li class="fragment">"Database design doesn't matter--add more hardware and that will fix the problem."</li>
						<li class="fragment">"Getting to Third Normal Form is all you need to know about normalization."</li>
						<li class="fragment">"Third Normal Form is important."</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/motivation.jpg" data-background-opacity="0.2">
					<h3>Motivation</h3>
					
					<p>My goals in this talk:</p>
					
					<ul>
						<li>Explain the basics behind database normalization.</li>
						<li>Dive into the two most important normal forms.</li>
						<li>Briefly cover other interesting normal forms.</li>
						<li>Cover critiques of normalization.</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/caution.jpg" data-background-opacity="0.2">
					<h3>A Brief Warning</h3>
					
					<p>Normalization is a part of relational theory, meaning that there will be math and there will be discussions of formal logic.</p>

					<p>I will do my best to minimize the learning curve, but we're ultimately solving math problems using logical analysis.</p>
					
					<p>Also, some of these normal forms are not well-understood outside of academic circles and so your interpretation of the forms may not match what I'm going to describe.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Source</h3>
					
					<p>The source of most of today's talk is <a href="https://www.apress.com/us/book/9781484255391">C.J. Date's Database Design and Relational Theory, 2nd Edition</a> (Apress, 2019).</p>

					<img src="presentation/assets/image/DatabaseDesignCover.jpg" height="450" />
				</section>

				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Scenario</h3>
					
					<p>Our scenario is a music studio, responsible for managing artists, cutting albums, marketing, and distribution.</p>

					<p>This studio is working on a centralized database system but their application developers don't have much experience and would like our advice on how to do things the right way.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li class="active">The Basics</li>
						<li>1NF</li>
						<li>BCNF</li>
						<li>5NF</li>
						<li>4NF</li>
						<li>6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/rulers.jpg" data-background-opacity="0.2">
					<h3>What is Normalization?</h3>
					
					<p>Normalization is a set of logical rules and processes to follow.</p>
					
					<p>Normalization works off of a <strong>logical</strong> data model.  From there, we can (theoretically) adapt to a <strong>physical</strong> data model for implementation.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Quick Primer on Terminology</h3>
					
					<p>We're used to thinking in terms of tables, rows, and columns.  Let's take a step back and talk about the data modeling terms.</p>
					
					<img src="presentation/assets/image/Terminology.png" height="425" />
				</section>
				
				<section data-background-image="presentation/assets/background/goals.jpg" data-background-opacity="0.2">
					<h3>Goals of Normalization</h3>
					
					<ul>
						<li>Remove <strong>redundant</strong> data</li>
						<li>Fix <strong>incorrect designs</strong></li>
						<li>Achieve a design which is a <strong>good representation of the real world</strong></li>
						<li>Simplify the statement and enforcement of certain <strong>integrity constraints</strong></li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Normal Forms</h3>
					
					<img src="presentation/assets/image/NormalForms.png" />
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Normal Forms Ranked by Importance</h3>
					
					<img src="presentation/assets/image/NormalFormsTierList.png">
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li class="active">1NF</li>
						<li>BCNF</li>
						<li>5NF</li>
						<li>4NF</li>
						<li>6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>What 1NF Is</h3>
					
					<p>First normal form (1NF) is all about key rules and the shape of tuples.</p>
					
					<blockquote>
						Given relvar R with heading H containing attributes A1...An of types T1...Tn, all tuples follow heading H and have one value of type Ti for attribute Ai.
					</blockquote>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>In Other Words</h3>
					
					<table>
						<thead>
							<tr>
								<th>Artist (CHAR)</th>
								<th>Album (CHAR)</th>
								<th>ReleaseYear (INT)</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Tsunami Bomb</td>
								<td>The Ultimate Escape</td>
								<td>2002</td>
							</tr>
							<tr>
								<td>Tsunami Bomb</td>
								<td>The Definitive Act</td>
								<td>2004</td>
							</tr>
							<tr>
								<td>Tsunami Bomb</td>
								<td>Trust No One</td>
								<td>2016</td>
							</tr>
						</tbody>
					</table>
					
					<p>Adding a new tuple <code>t(Tsunami Bomb, The Spine that Binds, 2019)</code> requires that the new tuple's heading, with attributes and types, matches the existing relvar's heading.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/rulers.jpg" data-background-opacity="0.2">
					<h3>The Rules on 1NF</h3>
					
					<p>First normal form (1NF) has a few rules:</p>
					
					<ul>
						<li>New tuples match the existing relvar's heading.</li>
						<li class="fragment">All tuples must have <strong>values</strong> for all attributes.  This means NULL violates 1NF!</li>
						<li class="fragment">No duplicate tuples are allowed</li>
						<li class="fragment">Attribute order does not matter for tuples</li>
						<li class="fragment">Tuple order does not matter for relations</li>
						<li class="fragment">All attributes are <strong>regular</strong>:  they have a name, a type, are not hidden, etc.</li>
					</ul>
				</section>

				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Quick Quiz -- Is This in 1NF?</h3>

					<img src="presentation/assets/image/AlbumMega.png" />
				</section>

				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Quick Quiz -- Is This in 1NF?</h3>

					<p>Answer:  YES!</p>
					<p>Repeated sets are NOT a violation of 1NF!</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li>1NF</li>
						<li class="active">BCNF</li>
						<li>5NF</li>
						<li>4NF</li>
						<li>6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>

				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Importance of BCNF</h3>
					
					<p>Boyce-Codd Normal Form is one of the two most important normal forms.  It prevents a variety of <strong>data anomalies</strong>:</p>
					
					<ul>
						<li>Update anomalies</li>
						<li>Redundant data (some types)</li>
						<li>Missing data</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>We Have Data</h3>
					
					<table>
						<thead>
							<tr>
								<th>Date</th>
								<th>Artist</th>
								<th>Album</th>
								<th>Genre</th>
								<th>Studio</th>
								<th>Manager</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2023-07-10</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td>Marie</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Marie</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Land of Talk</td>
								<td>A2</td>
								<td>Indie</td>
								<td>B</td>
								<td>Jacques</td>
							</tr>
							<tr>
								<td>2023-07-11</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td>Marie</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Update Anomalies</h3>
					
					<p>Lindsay takes over Studio A.  But we miss it in one entry.</p>
					
					<table>
						<thead>
							<tr>
								<th>Date</th>
								<th>Artist</th>
								<th>Album</th>
								<th>Genre</th>
								<th>Studio</th>
								<th>Manager</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2023-07-10</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Land of Talk</td>
								<td>A2</td>
								<td>Indie</td>
								<td>B</td>
								<td>Jacques</td>
							</tr>
							<tr>
								<td>2023-07-11</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td><p class="fragment highlight-red">Marie</p></td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Redundant Data</h3>
					
					<p>Kidneythieves had to cancel so we booked Metric for the entire day.  Let's update the database.</p>

					<table>
						<thead>
							<tr>
								<th>Date</th>
								<th>Artist</th>
								<th>Album</th>
								<th>Genre</th>
								<th>Studio</th>
								<th>Manager</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr class="fragment highlight-red">
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Land of Talk</td>
								<td>A2</td>
								<td>Indie</td>
								<td>B</td>
								<td>Jacques</td>
							</tr>
							<tr>
								<td>2023-07-11</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Missing Data</h3>
					
					<p>Nobody's booked in Studio C. How do we indicate that it exists?</p>
					
					<table>
						<thead>
							<tr>
								<th>Date</th>
								<th>Artist</th>
								<th>Album</th>
								<th>Genre</th>
								<th>Studio</th>
								<th>Manager</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Metric</td>
								<td>A3</td>
								<td>Indie</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr>
								<td>2023-07-10</td>
								<td>Land of Talk</td>
								<td>A2</td>
								<td>Indie</td>
								<td>B</td>
								<td>Jacques</td>
							</tr>
							<tr>
								<td>2023-07-11</td>
								<td>Kidneythieves</td>
								<td>A1</td>
								<td>Industrial</td>
								<td>A</td>
								<td>Lindsay</td>
							</tr>
							<tr class="fragment highlight-red">
								<td>2023-07-10</td>
								<td>NOBODY</td>
								<td>NONE</td>
								<td>N/A</td>
								<td>C</td>
								<td>Charles</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>Boyce-Codd Normal Form Defined</h3>
					
					<p>We can define BCNF as:</p>
					
					<blockquote>
						All functional dependencies have superkey determinants.
					</blockquote>
				</section>

				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>Superkey</h3>
					
					<p>Superkey:  a unique combination of attributes, but not necessarily the most parsimonious unique combination of attributes.</p>
					
					<p>If <code>(RecordingDate, Artist)</code> is a key, <code>(RecordingDate)</code> is a <strong>subkey</strong> and <code>(RecordingDate, Artist, Studio)</code> is a <strong>superkey</strong>.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/arrow.jpg" data-background-opacity="0.2">
					<h3>Functional Dependencies</h3>
					
					<p>Suppose we have some attribute SoundEngineer.</p>
					<p>The value of SoundEngineer depends on inputs Producer and Studio:</p>
					
					<table>
						<thead>
							<tr>
								<th>Studio</th>
								<th>Producer</th>
								<th>SoundEngineer</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>A</td>
								<td>Janice</td>
								<td>Sam</td>
							</tr>
							<tr>
								<td>B</td>
								<td>Randi</td>
								<td>Edgar</td>
							</tr>
							<tr>
								<td>A</td>
								<td>Janice</td>
								<td>Sam</td>
							</tr>
							<tr>
								<td>C</td>
								<td>Tamika</td>
								<td>Sam</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/arrow-right.jpg" data-background-opacity="0.2">
					<h3>Functional Dependencies</h3>
					
					<p>When we see <code>Studio=A</code> and <code>Producer=Janice</code>, we know <code>SoundEngineer=Sam</code>.</p>
					
					<p>In other words, Studio and Producer <strong>determine</strong> SoundEngineer, or <code>(Studio, Producer)</code> is the <strong>determinant</strong> for SoundEngineer.</p>
					
					<p>In mathematical terms, we can write this as <code>(Studio, Producer) -> SoundEngineer</code>.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/arrow-right.jpg" data-background-opacity="0.2">
					<h3>Functional Dependencies</h3>
					
					<p>Note that functional dependencies only go one way.</p>
					
					<p><code>(Studio, Producer) -> SoundEngineer</code>.</p>
					
					<p><code>Studio=A && Producer=Janice -> SoundEngineer=Sam</code>.</p>
					
					<p>But Sam can be the sound engineer for other combinations of Studio + Producer.  The only thing we guarantee is that <code>(A, Janice) -> Sam</code> (for all combinations of Studio*Producer and their relevant SoundEngineers).</p>
				</section>
				
				<section data-background-image="presentation/assets/background/questions.jpg" data-background-opacity="0.2">
					<h3>Figuring out Functional Dependencies</h3>
					
					<p>NOTE:  figuring out functional dependencies in practice may be difficult!</p>
					
					<p>There are two primary techniques for figuring them out in practice.</p>
					
					<ul>
					  <li>Ask an expert -- discuss business rules and find out what they know.</li>
					  <li>Review existing data and see where we can find columns whose values <strong>always</strong> match up in this way. Functional dependencies must always hold; it can't just be a "sometimes" thing.</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/books-45degree.jpg" data-background-opacity="0.2">
					<h3>Boyce-Codd Normal Form Reviewed</h3>
					
					<blockquote>
						All functional dependencies have superkey determinants.
					</blockquote>
					
					<ul>
						<li>Superkey:  key and maybe more.</li>
						<li>Functional dependency:  strict relationship between attributes.</li>
						<li>Determinant:  "input(s)" for the functional dependency.</li>
					</ul>
					
					<p>Relvars in BCNF are <strong>guaranteed</strong> to suffer from none of the anomalies we just described!</p>
				</section>

				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Solution, Step 1</h3>
					
					<p>Start with a relvar whose heading has all attributes.  Figure out the candidate key(s) and functional dependencies for this relvar.</p>
					
					<div class="container">
						<div class="col">
							<img src="presentation/assets/image/dmcampaign.png" height="400" />
						</div>
						<div class="col">
							<table>
								<tbody>
									<tr>
										<td>CampaignID</td>
										<td>CName, COName, AgencyID, MaxBudget, MinBid</td>
									</tr>
									<tr>
										<td>AgencyID</td>
										<td>AName, TakeRate</td>
									</tr>
									<tr>
										<td>AudienceTargetID</td>
										<td>TAgeRng, TGenPref</td>
									</tr>
									<tr>
										<td>CampaignID, AudienceTargetID</td>
										<td>AudienceBidModifier</td>
									</tr>
							</table>
						</div>					
					</div>
				</section>
				
				<section data-background-image="presentation/assets/background/arrow-right.jpg" data-background-opacity="0.2">
					<h3>The Solution, Step 2</h3>
					
					<p>Next, ask this question:  are all determinants candidate keys?  The answer is obviously no.  Only the final determinant is.</p>
					
					<table>
						<thead>
							<tr>
								<th>Determinant</th>
								<th>Dependency</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>CampaignID</td>
								<td>CampaignName, CampaignOwnerName, AgencyID, MaximumDailyBudget, MinimumBid</td>
							</tr>
							<tr>
								<td>AgencyID</td>
								<td>AgencyName, TakeRate</td>
							</tr>
							<tr>
								<td>AudienceTargetID</td>
								<td>TargetAgeRange, TargetGenrePreference</td>
							</tr>
							<tr>
								<td><strong>CampaignID, AudienceTargetID</strong></td>
								<td>AudienceBidModifier</td>
							</tr>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/math.jpg" data-background-opacity="0.1">
					<h3>Intermission:  Heath's Theorem</h3>
					
					<p>Let's introduce Heath's theorem here:</p>
					
					<blockquote>
						Given a relvar R with components { X, Y, Z }, as well as functional dependency X --> Y, we can break R into two relvars, containing { X, Y } and { X, Z }, without loss.
					</blockquote>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Solution, Step 3</h3>
					
					<p>If the answer to Step 2 was no, take a non-candidate key determinant and break it out into its own relvar, following Heath's theorem.</p>
					
					<div class="container">
						<div class="col">
							<img src="presentation/assets/image/agency.png" />
						</div>
						<div class="col">
							<img src="presentation/assets/image/dmcampaign2.png" />
						</div>					
					</div>					
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The Solution, Again</h3>
					
					<p>Repeat steps 2 and 3 as long as there are more functional dependencies which are not candidate keys.  Let's take CampaignID next.</p>
					
					<div class="container">
						<div class="col">
							<img src="presentation/assets/image/campaign.png" />
						</div>
						<div class="col">
							<img src="presentation/assets/image/dmcampaign3.png" />
						</div>					
					</div>					
				</section>
				
				<section data-background-image="presentation/assets/background/arrow-right.jpg" data-background-opacity="0.2">
					<h3>The Solution, Again Again</h3>
					
					<p>Our remaining functional dependencies are:</p>
					
					<table>
						<thead>
							<tr>
								<th>Determinant</th>
								<th>Dependency</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>AudienceTargetID</td>
								<td>TargetAgeRange, TargetGenrePreference</td>
							</tr>
							<tr>
								<td><strong>CampaignID, AudienceTargetID</strong></td>
								<td>AudienceBidModifier</td>
							</tr>
					</table>
					
					<p>This is not good enough!  <code>AudienceTargetID</code> is a <strong>subkey</strong> of the candidate key, not a <strong>superkey</strong>!  Therefore, break it out.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>The End Result</h3>
					
					<p>Here is our final data model, in BCNF.  Also, I took the opportunity to rename the <strong>DM Campaign</strong> relvar to <strong>CampaignTarget</strong>, which better represents its meaning.</p>
					
					<img src="presentation/assets/image/finaldatamodel1.png" />
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li>1NF</li>
						<li>BCNF</li>
						<li class="active">5NF</li>
						<li>4NF</li>
						<li>6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>Fifth Normal Form (5NF)</h3>
					
					<p>Fifth Normal Form is the second most-important normal form.  What BCNF is to functional dependencies, 5NF is to <strong>join dependencies</strong></p>
					
					<blockquote>
						Relvar R is in 5NF if and only if every join dependency in R is implied in the keys of R.
					</blockquote>
					
					<p class="fragment">Join Dependency:  if X1, X2, ..., Xn are the subsets of heading H on relvar R, a join dependency holds in R if and only if R can be non-loss decomposed into its projections on X1, X2, ..., Xn.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>A Quick Example</h3>
					
					<p>Suppose we have a relvar called <code>Warehouse</code> with FDs <code>{ WarehouseID -> GeneralManager, City } && { City -> PropertyTaxRate }</code>.</p>
					
					<table>
						<thead>
							<tr>
								<th>WarehouseID</th>
								<th>GeneralManager</th>
								<th>City</th>
								<th>PropertyTaxRate</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>1</td>
								<td>Steve</td>
								<td>Chicago</td>
								<td>4.8%</td>
							</tr>
							<tr>
								<td>2</td>
								<td>Lewis</td>
								<td>Lafayette</td>
								<td>2.1%</td>
							</tr>
							<tr>
								<td>3</td>
								<td>Suzanne</td>
								<td>Chicago</td>
								<td>4.8%</td>
							</tr>
							<tr>
								<td>4</td>
								<td>Alexa</td>
								<td>Lexington</td>
								<td>3.3%</td>
							</tr>
							<tr>
								<td>5</td>
								<td>Lee</td>
								<td>Lafyette</td>
								<td>2.1%</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>A Quick Example</h3>
					
					<p>A <strong>join dependency</strong> says we can break this relvar into at two components and reconstitute it without loss:  <code>W = { WarehouseID, GeneralManager, City }; C = { City, PropertyTaxRate }</code></p>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>WarehouseID</th>
										<th>GeneralManager</th>
										<th>City</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>1</td>
										<td>Steve</td>
										<td>Chicago</td>
									</tr>
									<tr>
										<td>2</td>
										<td>Lewis</td>
										<td>Lafayette</td>
									</tr>
									<tr>
										<td>3</td>
										<td>Suzanne</td>
										<td>Chicago</td>
									</tr>
									<tr>
										<td>4</td>
										<td>Alexa</td>
										<td>Lexington</td>
									</tr>
									<tr>
										<td>5</td>
										<td>Lee</td>
										<td>Lafyette</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>City</th>
										<th>Status</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Chicago</td>
										<td>4.8%</td>
									</tr>
									<tr>
										<td>Lafayette</td>
										<td>2.1%</td>
									</tr>
									<tr>
										<td>Lexington</td>
										<td>3.3%</td>
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
				</section>
				
				<section data-background-image="presentation/assets/background/engineering.jpg" data-background-opacity="0.2">
					<h3>Functional and Join Dependencies</h3>
					
					<p>Functional dependencies are join dependencies.</p>
					
					<p>But not all join dependencies are functional dependencies!</p>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>BCNF and 5NF</h3>
					
					<blockquote>
						A relvar R is in 5th Normal Form if it is in Boyce-Codd Normal Form and the relvar has no composite keys.
					</blockquote>
					
					<p>A relvar may be in BCNF but not 5NF if there is a composite key and there are non-functional join dependencies which are not key-based.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Another Example</h3>

					<table>
						<thead>
							<tr>
								<th>Artist</th>
								<th>Album</th>
								<th>SalesCountry</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Horrorpops</td>
								<td>Bring It On!</td>
								<td>United States</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>Bring It On!</td>
								<td>Denmark</td>
							</tr>
							<tr>
								<td>Band 1</td>
								<td>Unnamed Future Album</td>
								<td>Canada</td>
							</tr>
							<tr>
								<td>Band 2</td>
								<td>Unnamed Future Album</td>
								<td>Canada</td>
							</tr>
							<tr>
								<td>Band 1</td>
								<td>Unnamed Future Album</td>
								<td>United States</td>
							</tr>
							<tr>
								<td>Band 2</td>
								<td>Unnamed Future Album</td>
								<td>United States</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Another Example</h3>
					
					<p>This relvar <code>AlbumSales</code> has a key of <code>{ Artist, Album, SalesCountry }</code>.  This means it is in BCNF, but if it feels weird to you, it should!</p>
					
					<p>There are two <strong>join dependencies</strong> here!  <code>{ Artist, Album }</code> and <code>{ Album, SalesCountry }</code> can be cleanly split out from the ternary relationship into two separate relvars.</p>
					
			  </section>
					
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Another Example</h3>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Artist</th>
										<th>Album</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Horrorpops</td>
										<td>Bring It On!</td>
									</tr>
									<tr>
										<td>Band 1</td>
										<td>Unnamed Future Album</td>
									</tr>
									<tr>
										<td>Band 2</td>
										<td>Unnamed Future Album</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Album</th>
										<th>SalesCountry</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Bring It On!</td>
										<td>United States</td>
									</tr>
									<tr>
										<td>Bring It On!</td>
										<td>Denmark</td>
									</tr>
									<tr>
										<td>Unnamed Future Album</td>
										<td>Canada</td>
									</tr>
									<tr>
										<td>Unnamed Future Album</td>
										<td>United States</td>
									</tr>
								</tbody>
							</table>
						</div>					
					</div>
				</section>
				
				<section data-background-image="presentation/assets/background/connections.jpg" data-background-opacity="0.2">
					<h3>The Connection Trap</h3>
					
					<p>Suppose we have the following rules:</p>
					
					<ul>
						<li class="fragment">IF a Store (S) stocks a Genre (G)...</li>
						<li class="fragment">AND (S) stocks the work of an Artist (A)...</li>
						<li class="fragment">AND (A) performs in (G)...</li>
						<li class="fragment">THEN (S) sells works in (G) from (A)</li>
					</ul>
					
					<p class="fragment">This is also known as a <strong>symmetric constraint</strong>.  If this does not apply, then we fall into <strong>the connection trap</strong>.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/album1.jpg" data-background-opacity="0.1">
					<h3>No Connection Trap</h3>
					
					<p>In this setup, if all three attributes are necessary to determine which combinations are valid and which are not, then we are in 5NF.</p>
					
					<table>
						<thead>
							<tr>
								<th>Store</th>
								<th>Genre</th>
								<th>Artist</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Music Everywhere</td>
								<td>Punk Rock</td>
								<td>Bad Religion</td>
							</tr>
							<tr>
								<td>Music Everywhere</td>
								<td>Prog Rock</td>
								<td>Rush</td>
							</tr>
							<tr>
								<td>The Music Factory</td>
								<td>Indie</td>
								<td>Metric</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/album2.jpg" data-background-opacity="0.1">
					<h3>No Connection Trap</h3>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Genre</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Punk</td>
										<td>Bad Religion</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Prog</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
										<td>Metric</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<p>Now, we see two stores (Music Everywhere & The Music Factory) who sell albums by various artists in different genres.  Bad Religion makes Punk Rock albums, Rush makes Prog Rock albums, and Metric makes Indie albums.</p>
						</div>					
					</div>
					
					<p>If we have a rule in which stores sell <strong>all</strong> artists in a genre, then we can decompose this entity further.<br /> We then have a JD: <code>*{ {S, G}, {G, A}, {S, A} }</code></p>	
				</section>
				
				<section data-background-image="presentation/assets/background/album2.jpg" data-background-opacity="0.1">
					<h3>No Connection Trap</h3>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Genre</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Punk</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Prog</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Genre</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Punk</td>
										<td>Bad Religion</td>
									</tr>
									<tr>
										<td>Prog</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>Indie</td>
										<td>Metric</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Bad Religion</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Metric</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<p>As long as our symmetric constraint holds, everything is fine.  But what happens if Bad Religion sells a Prog Rock album?</p>
				</section>
				
				<section data-background-image="presentation/assets/background/album3.jpg" data-background-opacity="0.2">
					<h3>No Connection Trap</h3>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Genre</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Punk</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Prog</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Bad Religion</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Genre</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Indie</td>
										<td>Metric</td>
									</tr>
									<tr>
										<td>Prog</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>Punk</td>
										<td>Bad Religion</td>
									</tr>
									<tr class="fragment highlight-red">
										<td>Prog</td>
										<td>Bad Religion</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<p class="fragment">Now this means that Music Everywhere must sell Bad Religion's Prog Rock album.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/compact-discs.jpg" data-background-opacity="0.1">
					<h3>The Connection Trap in Action</h3>
					
					<p>Now let's say that there is no such symmetric constraint.  The <strong>only</strong> results we should see are the following:</p>
					
					<table>
						<thead>
							<tr>
								<th>Store</th>
								<th>Genre</th>
								<th>Artist</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Music Everywhere</td>
								<td>Punk Rock</td>
								<td>Bad Religion</td>
							</tr>
							<tr>
								<td>Music Everywhere</td>
								<td>Prog Rock</td>
								<td>Rush</td>
							</tr>
							<tr>
								<td>The Music Factory</td>
								<td>Indie</td>
								<td>Metric</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/record-player.jpg" data-background-opacity="0.2">
					<h3>The Connection Trap in Action</h3>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Genre</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>M.E.</td>
										<td>Punk</td>
									</tr>
									<tr class="fragment highlight-red">
										<td>M.E.</td>
										<td>Prog</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Store</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr class="fragment highlight-red">
										<td>M.E.</td>
										<td>Bad Religion</td>
									</tr>
									<tr>
										<td>M.E.</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>MFac</td>
										<td>Indie</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Genre</th>
										<th>Artist</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Indie</td>
										<td>Metric</td>
									</tr>
									<tr>
										<td>Prog</td>
										<td>Rush</td>
									</tr>
									<tr>
										<td>Punk</td>
										<td>Bad Religion</td>
									</tr>
									<tr class="fragment highlight-red">
										<td>Prog</td>
										<td>Bad Religion</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
					<p>We've broken this out.  But is it correct?</p>
					<p class="fragment">Nope!  This says that Music Everywhere will sell Bad Religion's Prog Rock album, but that's not true!</p>
				</section>
				
				<section data-background-image="presentation/assets/background/ugh.jpg" data-background-opacity="0.2">
					<h3>Why Bother?</h3>
					
					<p>If 5NF seems like overkill, here are a few reasons why it can be important.</p>
					
					<ul>
						<li class="fragment">With no composite keys, BCNF is 5NF, so you're already good.</li>
						<li class="fragment">Relvars not in 5NF can suffer from <strong>deletion anomalies</strong> and <strong>insertion anomalies</strong>.</li>
						<li class="fragment">Symmetric constraints aren't extremely common, but there <strong>is</strong> a common variant which you'll want to think about.</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li>1NF</li>
						<li>BCNF</li>
						<li>5NF</li>
						<li class="active">4NF</li>
						<li>6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>Fourth Normal Form (4NF)</h3>
					
					<p>Fourth Normal Form is an anachronism--it's really just a subset of 5NF.</p>
					
					<blockquote>
						Relvar R is in 4NF if and only if every Multi-Valued Dependency of R is implied in the keys of R.
					</blockquote>
					
					<p class="fragment">Multi-Valued Dependency:  a join dependency with exactly two components.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/skeleton-thinking.jpg" data-background-opacity="0.2">
					<h3>Multi-Valued Dependencies</h3>
					
					<p>We've already seen an example of this:  relvar <code>AlbumSales</code> has a key of <code>{ Artist, Album, SalesCountry }</code>.</p>
					
					<ul>
						<li>Artist <code>R</code> is on Album <code>A</code>, sold in SalesCountry <code>S</code></li>
						<li>Each album has a set of artists, and each album is sold in a set of countries</li>
						<li>For each album, there is a tuple for every combination of artist sales country</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Multi-Valued Dependencies</h3>
					
					<table>
						<thead>
							<tr>
								<th>Artist</th>
								<th>Album</th>
								<th>SalesCountry</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Horrorpops</td>
								<td>Bring It On!</td>
								<td>United States</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>Bring It On!</td>
								<td>Denmark</td>
							</tr>
							<tr>
								<td>Band 1</td>
								<td>Unnamed Future Album</td>
								<td>Canada</td>
							</tr>
							<tr>
								<td>Band 2</td>
								<td>Unnamed Future Album</td>
								<td>Canada</td>
							</tr>
							<tr>
								<td>Band 1</td>
								<td>Unnamed Future Album</td>
								<td>United States</td>
							</tr>
							<tr>
								<td>Band 2</td>
								<td>Unnamed Future Album</td>
								<td>United States</td>
							</tr>
						</tbody>
					</table>
					
					<p class="fragment"><code>*{ {Album, Artist}, {Album, SalesCountry} }</code></p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Multi-Valued Dependencies</h3>
					
					<p><code>*{ {Album, Artist}, {Album, SalesCountry} }</code></p>
					
					<p>The "4NF" diagram for this looks like:</p>
					
					<p><code>Album ->-> Artist && Album ->-> SalesCountry</code>, or <code>Album ->-> Artist|SalesCountry</code></p>
				</section>
				
				<section data-background-image="presentation/assets/background/math.jpg" data-background-opacity="0.1">
					<h3>Fagin's Theorem</h3>
					
					<blockquote>
						Relvar R can be nonloss decomposed into its components <code>XY</code> and <code>XZ</code> if and only if <code>X->->Y|Z</code> holds in R.
					</blockquote>
					
					<p class="fragment">In other words, if there are multiple, independent attributes, split them out into separate relvars.</p>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>What this Prevents</h3>
					
					<ul>
					  <li>Needing to have multiple "copies" of the same record--Unnamed Future Album need one row per artist * country, but what happens if we miss one of these?</li>
					  <li>Any update likely needs to update multiple rows</li>
					  <li>Any delete operation likely needs to delete multiple rows</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li>1NF</li>
						<li>BCNF</li>
						<li>5NF</li>
						<li>4NF</li>
						<li class="active">6NF</li>
						<li>Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/binders.jpg" data-background-opacity="0.2">
					<h3>Sixth Normal Form</h3>
					
					<blockquote>
						Relvar R is in Sixth Normal Form (6NF) if and only if all join dependencies which hold in R are trivial.
					</blockquote>
					
					<p class="fragment">In other words, there may be one non-key attribute in addition to the key.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/jars.jpg" data-background-opacity="0.2">
					<h3>An Example</h3>
					
					<p>Suppose we have a relvar <code>{ AlbumID, AlbumName, Runtime, ReleaseYear, ArtistID, ArtistID2, GenreID, GenreID2, GenreID3 }</code>.  Furthermore, our natural key is <code>AlbumID</code>.  This relvar is in 5NF (BCNF + non-composite key) and can be made 6NF in the following way:</p>
					
				</section>
				
				<section data-background-image="presentation/assets/background/jars.jpg" data-background-opacity="0.2">				
					<h3>An Example</h3>
				
					<p><code>{ AlbumID, AlbumName }</code></p>
					<p><code>{ AlbumID, Runtime }</code></p>
					<p><code>{ AlbumID, ReleaseYear }</code></p>
					<p><code>...</code></p>
					<p><code>{ AlbumID, GenreID2 } </code></p>
					<p><code>{ AlbumID, GenreID3 } </code></p>
				</section>
				
				<section data-background-image="presentation/assets/background/monkey-thinking.jpg" data-background-opacity="0.2">
					<h3>Do We Need 6NF?</h3>
					
					<p>Maybe!</p>
					
					<ul>
						<li>If an attribute always has a value, it's better to cluster these attributes together.</li>
						<li>If an attribute may be missing, it might be better to break it out into 6NF (to avoid NULL).</li>
						<li>If an attribute is part of a "nested set," we can unpivot these into one table.</li>
					</ul>
				</section>
					
				<section data-background-image="presentation/assets/background/monkey-thinking.jpg" data-background-opacity="0.2">
					<h3>Do We Need 6NF?</h3>
					
					<p>Suppose we might not always have runtime and we want to unpivot artists and genres (assuming there is no 'order' to artists or genres).  Then we'd have:</p>
					
					<p><code>{ AlbumID, AlbumName, ReleaseYear }</code></p>
					<p><code>{ AlbumID, Runtime }</code></p>
					<p><code>{ AlbumID, ArtistID }</code></p>
					<p><code>{ AlbumID, GenreID }</code></p>
				</section>
				
				<section data-background-image="presentation/assets/background/time.jpg" data-background-opacity="0.2">
					<h3>6NF and Intervals</h3>
					
					<p>6NF also helps us work with <strong>intervals</strong> of data.  Usually this is temporal data, like this example of a <code>Tour</code> relation:</p>
					
					<table>
						<thead>
							<tr>
								<th>HeadlinerArtist</th>
								<th>City</th>
								<th>Interval</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Bad Religion</td>
								<td>London</td>
								<td>D4:D8</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>Paris</td>
								<td>D3:D3</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>Athens</td>
								<td>D5:D10</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/warehouse-water.jpg" data-background-opacity="0.2">
					<h3>6NF and Intervals</h3>
					
					<p>Suppose we have an SCD2 style table:</p>
					
					<table>
						<thead>
							<tr>
								<th>HeadlinerArtist</th>
								<th>WarmupArtist</th>
								<th>City</th>
								<th>StartDate</th>
								<th>EndDate</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Bad Religion</td>
								<td>Rad Beligion</td>
								<td>London</td>
								<td>D1</td>
								<td>D8</td>
							</tr>
							<tr>
								<td>Bad Religion</td>
								<td>The Deviates</td>
								<td>London</td>
								<td>D9</td>
								<td>D14</td>
							</tr>
							<tr>
								<td>Bad Religion</td>
								<td>The Deviates</td>
								<td>Paris</td>
								<td>D15</td>
								<td>D17</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>The Chop Tops</td>
								<td>Athens</td>
								<td>D1</td>
								<td>D17</td>
							</tr>
							<tr>
								<td>Horrorpops</td>
								<td>Nekromantix</td>
								<td>Athens</td>
								<td>D18</td>
								<td>D18</td>
							</tr>
						</tbody>
					</table>
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>6NF and Intervals</h3>
					
					<p>Break it into 2 non-redundant relvars:</p>
					
					<div class="container">
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Headliner</th>
										<th>City</th>
										<th>Interval</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>BadReligion</td>
										<td>London</td>
										<td>D1:D14</td>
									</tr>
									<tr>
										<td>BadReligion</td>
										<td>Paris</td>
										<td>D15:D17</td>
									</tr>
									<tr>
										<td>Horrorpops</td>
										<td>Athens</td>
										<td>D1:D18</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="col">
							<table>
								<thead>
									<tr>
										<th>Headliner</th>
										<td>Warmup</th>
										<th>Interval</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>B.R.</td>
										<td>Rad Beligion</td>
										<td>D1:D8</td>
									</tr>
									<tr>
										<td>B.R.</td>
										<td>The Deviates</td>
										<td>D9:D17</td>
									</tr>
									<tr>
										<td>H.</td>
										<td>The Chop Tops</td>
										<td>D1:D17</td>
									</tr>
									<tr>
										<td>H.</td>
										<td>Nekromantix</td>
										<td>D18:D18</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<p>To bring these back together, unpack on <code>Interval</code>, join together elements, and re-pack on <code>Interval</code>.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>Visualizing the Interval</h3>
					
					<img src="presentation/assets/image/6NF_Artist_City.png" />
					
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>Visualizing the Interval</h3>
					
					<img src="presentation/assets/image/6NF_Artist_Warmup.png" />
					
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>Unpacking and Re-Packing</h3>
					
					<img src="presentation/assets/image/6NF_Block1.png" />
					
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>Unpacking and Re-Packing</h3>
					
					<img src="presentation/assets/image/6NF_Block2.png" />
					
				</section>
				
				<section data-background-image="presentation/assets/background/traffic.jpg" data-background-opacity="0.2">
					<h3>Unpacking and Re-Packing</h3>
					
					<img src="presentation/assets/image/6NF_Block3.png" />
					
					<p>This gets us back to our type-2 SCD, but without having to store denormalized data!</p>
					
				</section>
				
				<section data-background-image="presentation/assets/image/Bubbles.jpg" data-background-opacity="0.4">
					<h3>Agenda</h3>
					
					<ol>
						<li>The Basics</li>
						<li>1NF</li>
						<li>BCNF</li>
						<li>5NF</li>
						<li>4NF</li>
						<li>6NF</li>
						<li class="active">Normalizaton and...</li>
					</ol>
				</section>
				
				<section data-background-image="presentation/assets/background/warehouse.jpg" data-background-opacity="0.2">
					<h3>Normalization and Data Warehousing</h3>
					
					<p>Relational theorists like Date tend not to like the Kimball model very much.  As a general-purpose relational model, the star schema is terrible.</p>
					
					<p>It is, however, a great model for data warehousing if you follow certain rules:</p>
					
					<ul>
						<li>One and only one process to write data</li>
						<li>The model is a proper model of business processes and understanding</li>
						<li>Facts represent measurements of things</li>
						<li>Dimensions represent further information about things</li>
						<li>The appropriate slowly-changing dimension type is used for each dimension</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/process.jpg" data-background-opacity="0.2">
					<h3>Normalization and Overnormalization</h3>
					
					<p>Overnormalization isn't really a thing.  What people tend to see as overnormalization tend to be one of the following:</p>
					
					<ul>
						<li>Trying to remove legitimate business flexibility</li>
						<li>Lossy decomposition and phantom rows</li>
					</ul>
					
				</section>
				
				<section data-background-image="presentation/assets/background/muay-thai.jpg" data-background-opacity="0.2">
					<h3>Normalization and Denormalization</h3>
					
					<p>Normalization has very specific rules:  you can tell where you are and what you'd need to do to get to the next level.  With denormalization, how can we answer the following questions?</p>
					
					<ul>
						<li>Denormalize to what extent?</li>
						<li>Which method(s) should I use to denormalize these relvars?</li>
						<li>Is my data model sufficiently denormalized?</li>
						<li>Has my data model been denormalized correctly?</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/philosophy.jpg" data-background-opacity="0.2">
					<h3>Normalization and Denormalization</h3>
					
					<p>General philosophy:</p>
					
					<ul>
						<li>Denormalizing to increase redundancy can be okay <strong>when needed</strong>.  Ex:  data warehousing.</li>
						<li>Denormalization can add invalid design ideas back in--avoid those at all costs.</li>
					</ul>
				</section>
				
				<section data-background-image="presentation/assets/background/measurement-tools.jpg" data-background-opacity="0.2">
					<h3>Normalization and Its Discontents</h3>
					
					<p>Normalization is not the end-all of relational design.</p>
					
					<ul>
						<li>Join dependencies and functional dependencies are not the only kinds of constraints, and normalization will not help with these others</li>
						<li>Multiple non-loss decompositions into 5NF may be possible, but there is no formal guidance on which to choose</li>
						<li>Applying academic advice to practical circumstances is not always a direct mapping</li>
						<li>Normalization is explicitly about the <strong>logical</strong> model, not the <strong>physical</strong> model</li>
					</ul>
				</section>				
				
				<section data-background-image="presentation/assets/background/wrappingup.jpg" data-background-opacity="0.2">
					<h3>Wrapping Up</h3>
					
					<p>This has been a look at normalization from an academic perspective.  This can be a complicated topic and I've tried to straddle the line between formal correctness and ease of explanation.</p>
				</section>
				
				<section data-background-image="presentation/assets/background/wrappingup.jpg" data-background-opacity="0.2">
					<h3>Wrapping Up</h3>
					
					<p>
						To learn more, go here:
						<br />
						<a href="https://csmore.info/on/dbdesign">https://CSmore.info/on/dbdesign</a>
					</p>
					<br />
					<p>
						And for help, contact me:
						<br />
						<a href="mailto:feasel@catallaxyservices.com">feasel@catallaxyservices.com</a> | <a href="https://www.twitter.com/feaselkl">@feaselkl</a>
					</p>
					<br />
					<p>
						Catallaxy Services consulting:
						<br />
						<a href="https://csmore.info/contact">https://CSmore.info/on/contact</a>
					</p>
				</section>
			</div>
		</div>

		<script src="../reveal.js/dist/reveal.js"></script>
		<script src="../reveal.js/plugin/zoom/zoom.js"></script>
		<script src="../reveal.js/plugin/notes/notes.js"></script>
		<script src="../reveal.js/plugin/search/search.js"></script>
		<script src="../reveal.js/plugin/markdown/markdown.js"></script>
		<script src="../reveal.js/plugin/math/math.js"></script>
		<script src="../reveal.js/plugin/menu/menu.js"></script>
		<script src="../reveal.js/plugin/highlight/highlight.js"></script>
		<script src="../reveal.js/plugin/chart/Chart.min.js"></script>
		<script src="../reveal.js/plugin/chart/plugin.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				width: '70%',
				controls: true,
				progress: true,
				center: true,
				hash: true,
				transition: 'fade',
				

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight, RevealMath, RevealMenu, RevealChart ]
			});
		</script>
	</body>
</html>
